option_settings:
  # Application environment settings
  aws:elasticbeanstalk:application:environment:
    NODE_ENV: production
    PORT: 5000

  # Health check configuration
  aws:elasticbeanstalk:healthreporting:system:
    SystemType: enhanced
    HealthCheckSuccessThreshold: Ok
    EnhancedHealthAuthEnabled: true

  # Load balancer health check
  aws:elasticbeanstalk:environment:process:default:
    HealthCheckPath: /api/health
    HealthCheckInterval: 15
    HealthyThresholdCount: 3
    UnhealthyThresholdCount: 5
    HealthCheckTimeout: 5
    MatcherHTTPCode: 200

  # Nginx proxy configuration
  aws:elasticbeanstalk:environment:proxy:staticfiles:
    /static: dist/public
    /assets: dist/public/assets

  # Instance configuration
  aws:ec2:instances:
    InstanceTypes: t3.small

  # Rolling deployment configuration
  aws:elasticbeanstalk:command:
    DeploymentPolicy: RollingWithAdditionalBatch
    BatchSizeType: Fixed
    BatchSize: 1
    Timeout: 600
